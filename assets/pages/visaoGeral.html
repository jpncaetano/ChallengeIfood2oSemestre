<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financeiro - Meu Restaurante</title>

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">

    <!-- CSS Personalizado -->
    <link rel="stylesheet" href="/assets/css/visaoGeral.css">
</head>
<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <a href="#">
            <img src="/assets/images/logoVermelho.png" alt="iFood" class="logo">
        </a>
        <ul class="nav flex-column">
            <!-- Menu Restaurante -->
            <li class="nav-item">
                <a class="nav-link" href="#">Meu Restaurante</a>
            </li>

            <!-- Status da Loja -->
            <li class="nav-item">
                <div class="status-box">
                    <span class="status-circle"></span>
                    <div class="status-text">
                        <span class="status-label">Loja aberta</span>
                        <span class="status-description">Dentro do horário programado</span>
                    </div>
                </div>
            </li>

            <!-- Menu Financeiro -->
            <li class="nav-item">
                <span class="nav-link menu-pai">Financeiro</span>
                <ul class="submenu">
                    <li><a class="nav-link active" href="#" onclick="showMainTab('visaoGeral')">Visão Geral</a></li>
                    <li><a class="nav-link" href="#" onclick="showMainTab('analiseDesempenho')">Análise de Desempenho</a></li>
                    <li><a class="nav-link" href="#" onclick="showMainTab('transacoes')">Transações</a></li>
                    <li><a class="nav-link" href="#" onclick="showMainTab('nfe')">NF-e</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- Conteúdo Principal -->
    <div class="main-content">
        <div class="header-container">
            <h1>Financeiro</h1>

            <!-- Seletor de Período -->
            <div class="period-container">
                <label for="periodo">Período dos Dados:</label>
                <input type="date" id="periodo" name="periodo" class="date-picker">
            </div>
        </div>

        <!-- Cards principais -->
        <div id="visaoGeral" class="tab-content">
            <div class="cards-box">
                <div class="card">
                    <h2>Valor a Receber</h2>
                    <p>Total</p>
                    <h3>R$18.458,58</h3>
                </div>
                <div class="card">
                    <h2>Repasse de Hoje</h2>
                    <p>Total</p>
                    <h3>R$1.458,58</h3>
                </div>
                <div class="card">
                    <h2>Repasse Agendado</h2>
                    <p>Total</p>
                    <h3>R$4.325,65</h3>
                </div>
                <div class="card">
                    <h2>Receita Total</h2>
                    <h3>R$25.000,00</h3>
                    <p>Variação: +10%</p>
                </div>
                <div class="card">
                    <h2>Despesas Operacionais</h2>
                    <h3>R$7.000,00</h3>
                    <p>Variação: -5%</p>
                </div>
                <div class="card">
                    <h2>Comissão</h2>
                    <h3>R$2.500,00</h3>
                    <p>Variação: +3%</p>
                </div>
                <div class="card">
                    <h2>Lucro Bruto</h2>
                    <h3>R$18.000,00</h3>
                    <p>Variação: +15%</p>
                </div>
                <div class="card">
                    <h2>Lucro Líquido</h2>
                    <h3>R$10.000,00</h3>
                    <p>Variação: -7%</p>
                </div>
                <div class="card">
                    <h2>Ticket Médio</h3>
                    <h3>R$52,20</h3>
                    <p>Variação: -2%</p>
                </div>
            </div>

            <!-- Tabela de Detalhes dos Pedidos -->
            <div class="table-container">
                <h2>Detalhes dos Pedidos</h2>
                <div class="tabs">
                    <div class="tab active" onclick="showPedidosTab('aReceber')">A Receber</div>
                    <div class="tab" onclick="showPedidosTab('pedidosPagos')">Pedidos Pagos</div>
                </div>

                <!-- Barra de Pesquisa -->
                <div class="search-container">
                    <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Buscar pedidos...">
                </div>

                <!-- Tabela A Receber -->
                <div id="aReceber" class="tab-content pedidos-tab-content">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Pedido</th>
                                <th>Status</th>
                                <th>Subtotal</th>
                                <th>Comissões iFood</th>
                                <th>A Receber pelo Pedido</th>
                                <th></th> <!-- Coluna para "Ver Detalhes" -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0001</td>
                                <td>Aguardando Repasse</td>
                                <td>R$89,45</td>
                                <td>R$13,41</td>
                                <td>R$76,03</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0002</td>
                                <td>Aguardando Repasse</td>
                                <td>R$38,31</td>
                                <td>R$5,74</td>
                                <td>R$32,57</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0003</td>
                                <td>Aguardando Repasse</td>
                                <td>R$50,75</td>
                                <td>R$7,61</td>
                                <td>R$43,14</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0004</td>
                                <td>Aguardando Repasse</td>
                                <td>R$105,13</td>
                                <td>R$15,76</td>
                                <td>R$89,37</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0005</td>
                                <td>Aguardando Repasse</td>
                                <td>R$29,45</td>
                                <td>R$4,41</td>
                                <td>R$25,04</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0006</td>
                                <td>Aguardando Repasse</td>
                                <td>R$62,20</td>
                                <td>R$9,33</td>
                                <td>R$52,87</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0007</td>
                                <td>Aguardando Repasse</td>
                                <td>R$100,50</td>
                                <td>R$15,07</td>
                                <td>R$85,43</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0008</td>
                                <td>Aguardando Repasse</td>
                                <td>R$180,00</td>
                                <td>R$27,00</td>
                                <td>R$153,00</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>                        
                        </tbody>
                    </table>
                </div>

                <!-- Tabela Pedidos Pagos -->
                <div id="pedidosPagos" class="tab-content pedidos-tab-content" style="display: none;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Pedido</th>
                                <th>Status</th>
                                <th>Subtotal</th>
                                <th>Transferência em</th>
                                <th>Valor Repassado</th>
                                <th></th> <!-- Coluna para "Ver Detalhes" -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0001</td>
                                <td>Pago</td>
                                <td>R$89,45</td>
                                <td>12/03/2023</td>
                                <td>R$76,03</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0002</td>
                                <td>Pago</td>
                                <td>R$38,31</td>
                                <td>11/03/2023</td>
                                <td>R$32,57</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0003</td>
                                <td>Pago</td>
                                <td>R$50,75</td>
                                <td>10/03/2023</td>
                                <td>R$43,14</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0004</td>
                                <td>Pago</td>
                                <td>R$105,13</td>
                                <td>09/03/2023</td>
                                <td>R$89,37</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0005</td>
                                <td>Pago</td>
                                <td>R$29,45</td>
                                <td>08/03/2023</td>
                                <td>R$25,04</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0006</td>
                                <td>Pago</td>
                                <td>R$62,20</td>
                                <td>07/03/2023</td>
                                <td>R$52,87</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0007</td>
                                <td>Pago</td>
                                <td>R$100,50</td>
                                <td>06/03/2023</td>
                                <td>R$85,43</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>
                            <tr>
                                <td>0008</td>
                                <td>Pago</td>
                                <td>R$180,00</td>
                                <td>05/03/2023</td>
                                <td>R$153,00</td>
                                <td><a href="#">Ver Detalhes</a></td>
                            </tr>                        
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Análise de Desempenho (ou outras abas principais) -->
        <div id="analiseDesempenho" class="tab-content" style="display: none;">
            <h2>Análise de Desempenho</h2>
            <!-- Conteúdo relacionado à Análise de Desempenho -->
        </div>

        <div id="transacoes" class="tab-content" style="display: none;">
            <h2>Transações</h2>
            <!-- Conteúdo relacionado a Transações -->
        </div>

        <div id="nfe" class="tab-content" style="display: none;">
            <h2>NF-e</h2>
            <!-- Conteúdo relacionado a NF-e -->
        </div>
    </div>

    <!-- Bootstrap e JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- JavaScript para alternar entre as abas -->
    <script>
        function showMainTab(tabId) {
            // Esconde todas as abas principais
            document.querySelectorAll('.tab-content').forEach(function(content) {
                content.style.display = 'none';
            });

            // Mostra a aba principal selecionada
            document.getElementById(tabId).style.display = 'block';

            // Remove a classe 'active' de todas as abas principais
            document.querySelectorAll('.nav-link').forEach(function(tab) {
                tab.classList.remove('active');
            });

            // Adiciona a classe 'active' à aba principal selecionada
            event.target.classList.add('active');

            // Garante que a aba "A Receber" esteja ativa ao selecionar "Visão Geral"
            if (tabId === 'visaoGeral') {
                document.querySelector('.tab.active').classList.remove('active');
                document.querySelector('.tab[onclick="showPedidosTab(\'aReceber\')"]').classList.add('active');
                document.getElementById('aReceber').style.display = 'block';
            }
        }

        function showPedidosTab(tabId) {
            // Esconde todas as abas de pedidos
            document.querySelectorAll('.pedidos-tab-content').forEach(function(content) {
                content.style.display = 'none';
            });

            // Mostra a aba de pedidos selecionada
            document.getElementById(tabId).style.display = 'block';

            // Remove a classe 'active' de todas as abas
            document.querySelectorAll('.tab').forEach(function(tab) {
                tab.classList.remove('active');
            });

            // Adiciona a classe 'active' à aba selecionada
            event.target.classList.add('active');
        }

        function searchTable() {
            // Declaração de variáveis
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.querySelector(".table");
            tr = table.getElementsByTagName("tr");

            // Loop sobre todas as linhas da tabela e oculta as que não correspondem à consulta de pesquisa
            for (i = 1; i < tr.length; i++) {
                tr[i].style.display = "none";
                td = tr[i].getElementsByTagName("td");
                for (var j = 0; j < td.length; j++) {
                    if (td[j]) {
                        txtValue = td[j].textContent || td[j].innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                            break;
                        }
                    }
                }
            }
        }

        // Exibe a aba "A Receber" por padrão ao carregar a página
        window.onload = function() {
            showPedidosTab('aReceber');
        }
    </script>
</body>
</html>
